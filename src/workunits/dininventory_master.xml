<?xml version="1.0" encoding="UTF-8"?>
<workunit>
    <invokers>
        <invoker type="din:create" action="init" caption="DIN Inventory" />
        <invoker type="din:open" action="open" caption="DIN Invnetory" />
    </invokers>
        
    <code lang="groovy">
        import com.rameses.rcp.common.*;
        import com.rameses.rcp.annotations.*;
        import com.rameses.osiris2.client.*;
        import com.rameses.osiris2.common.*;
        
        public class DINInventoryController extends CRUDController
        {
            String serviceName = 'TagabukidDINInventoryService'
            String entityName  = 'din'
            String prefixId    = 'OC'
        
            def startseries;
            def endseries;
            Map createEntity(){
                return [dincount:0]
            }
        
            @PropertyChangeListener
            def listener = [
                'entity.dincount':{
                    generateDIN();
                },
            ]   
        
            void generateDIN(){
                def currentsequence = service.getNextSequence();
                binding.refresh('startseries,endseries');
            }

        
        }
    </code>
    
    <pages>
        <page template="tagabukid.dts.master.DINInventoryPage" />
    </pages>
</workunit>
